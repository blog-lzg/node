<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NPM | node</title>
    <meta name="description" content="node文档">
    <link rel="stylesheet" href="/node/assets/style.e0411df8.css">
    <link rel="modulepreload" href="/node/assets/plugin-vue_export-helper.abe1cdd2.js">
    <link rel="modulepreload" href="/node/assets/Home.a593c821.js">
    <link rel="modulepreload" href="/node/assets/AlgoliaSearchBox.9d1e646e.js">
    <link rel="modulepreload" href="/node/assets/node_mds_2.npm.md.46ac5290.lean.js">
    <link rel="modulepreload" href="/node/assets/app.ead5fea0.js">
    
    <meta name="twitter:title" content="NPM | node">
  <meta property="og:title" content="NPM | node">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/node/" aria-label="node, back to home" data-v-675d8756 data-v-4a583abe><!----> node</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/node/" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/node/config/basics" data-v-b8818f8c>Config Reference <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/node/" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/node/config/basics" data-v-b8818f8c>Config Reference <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/node/node/mds/mds">node</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/node/node/mds/1.start.html">1.起步</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/node/node/mds/2.npm.html">2.npm</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_1-介绍">1.介绍</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2-什么是第三方模块">2.什么是第三方模块</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_3-npm的作用">3.npm的作用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-本地模块">4.本地模块</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-1-初始化">4.1 初始化</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-2-安装卸载第三方模块的命令">4.2  安装卸载第三方模块的命令</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-3-关于本地模块的说明">4.3 关于本地模块的说明</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-4-怎样使用第三方模块">4.4 怎样使用第三方模块</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-5-演示-moment-模块-的使用">4.5 演示 moment 模块 的使用</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_5-package-json文件">5.package.json文件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_6-require的加载机制">6.require的加载机制</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_7-开发属于自己的包">7.开发属于自己的包</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_7-1-规范的包结构">7.1 规范的包结构</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_7-2-开发属于自己的包">7. 2 开发属于自己的包</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_7-3-注册npm账号">7.3 注册npm账号</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_7-4-发布包">7.4 发布包</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_8-全局模块">8.全局模块</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_8-1-和本地模块的差异">8.1 和本地模块的差异</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_8-2-安装卸载命令">8.2 安装卸载命令</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_8-3-全局安装nrm">8.3 全局安装nrm</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_8-4-第一次运行报错及解决">8.4 第一次运行报错及解决</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_9-全局模块和本地模块的对比">9.全局模块和本地模块的对比</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/node/node/mds/3.other.html">3.其他</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/node/node/mds/4.mysql.html">4.mysql</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/node/node/mds/5.interface.html">5.接口</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="npm" tabindex="-1">NPM <a class="header-anchor" href="#npm" aria-hidden="true">#</a></h1><h2 id="_1-介绍" tabindex="-1">1.介绍 <a class="header-anchor" href="#_1-介绍" aria-hidden="true">#</a></h2><p>npm（node package manage）node 包 管理器。管理node包的工具。</p><p>包是什么？包就是模块。（包约等于模块，一个包可以包括一个或多个模块）</p><p>npm这个工具，在安装 node 的时候，就已经安装到你的计算机中了。</p><p>命令行中执行： <code>npm -v</code> ，如果看到版本号，说明安装成功了。</p><blockquote><p>npm 是 管理（下载、卸载、发布）第三方模块的工具。</p></blockquote><h2 id="_2-什么是第三方模块" tabindex="-1">2.什么是第三方模块 <a class="header-anchor" href="#_2-什么是第三方模块" aria-hidden="true">#</a></h2><p>非node自带的模块。也不是自定义的模块。</p><p>是别人写的模块，然后发布到npmjs.com网站，我们可以使用npm工具来下载安装别人写的模块。</p><p>第三方模块，都是在node核心模块的基础之上，封装了一下，实现了很多非常方便快速简洁的方法。</p><p>目前，npm网站收录了超过 180 万个第三方模块。</p><blockquote><p>如果你想实现一个功能。那么请搜索第三方模块，没有做不到的事情，只有你搜不到。</p></blockquote><h2 id="_3-npm的作用" tabindex="-1">3.npm的作用 <a class="header-anchor" href="#_3-npm的作用" aria-hidden="true">#</a></h2><p>npm的作用是：管理node模块的工具。</p><ul><li>下载并安装第三方的模块</li><li>卸载第三方模块</li><li>发布模块</li><li>删除已发布的模块</li><li>....</li></ul><blockquote><p>npm 就是一个管理（下载安装、卸载...）第三方模块的工具</p></blockquote><h2 id="_4-本地模块" tabindex="-1">4.本地模块 <a class="header-anchor" href="#_4-本地模块" aria-hidden="true">#</a></h2><h3 id="_4-1-初始化" tabindex="-1">4.1 初始化 <a class="header-anchor" href="#_4-1-初始化" aria-hidden="true">#</a></h3><p>安装本地模块，需要使用npm工具初始化。</p><div class="language-bash line-numbers-mode"><pre><code><span class="token function">npm</span> init -y
<span class="token comment"># 或</span>
<span class="token function">npm</span> init
<span class="token comment"># 然后一路回车</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>初始化之后，会在项目目录中生成 package.json 的文件。</p><p>注意事项：</p><ul><li>package name 默认使用当前文件夹 当做 包的名字</li><li>package name 不能有中文</li><li>package name 不能有特殊符号</li><li>package name 不能和需要安装的第三方模块同名</li></ul><h3 id="_4-2-安装卸载第三方模块的命令" tabindex="-1">4.2 安装卸载第三方模块的命令 <a class="header-anchor" href="#_4-2-安装卸载第三方模块的命令" aria-hidden="true">#</a></h3><p>初始化之后，就可以在当前文件夹中安装第三方模块了</p><div class="language-"><pre><code>建议在安装第三方模块之前，先执行如下命令。
下面的命令只需要执行一次即可（不管以后重启vscode还是重启电脑，都不需要执行第二次）
npm config set registry https://registry.npm.taobao.org
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>下载安装第三方模块</p><div class="language-bash line-numbers-mode"><pre><code><span class="token comment"># 正常的下载安装</span>
<span class="token function">npm</span> <span class="token function">install</span> 模块名

<span class="token comment"># 简写install为i</span>
<span class="token function">npm</span> i 模块名

<span class="token comment"># 一次性安装多个模块</span>
<span class="token function">npm</span> i 模块名 模块名 模块名
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>卸载模块</p><div class="language-bash line-numbers-mode"><pre><code><span class="token function">npm</span> uninstall 模块名
<span class="token function">npm</span> un 模块名
<span class="token function">npm</span> un 模块名 模块名 模块名
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>上课演示的是 jquery、mysql、moment、cors、express、echarts</p></blockquote><h3 id="_4-3-关于本地模块的说明" tabindex="-1">4.3 关于本地模块的说明 <a class="header-anchor" href="#_4-3-关于本地模块的说明" aria-hidden="true">#</a></h3><ul><li>下载安装的模块，存放在当前文件夹的 <code>node_modules</code> 文件夹中，同时还会生成一个记录下载的文件 <code>package-lock.json</code></li><li>下载的模块，在哪里可以使用 <ul><li>在当前文件夹</li><li>在当前文件夹的子文件夹</li><li>在当前文件夹的子文件夹的子文件夹</li><li>......</li><li>当查找一个模块的时候，会在当前文件夹的 node_modules 文件夹查找，如果找不到，则去上层文件夹的node_modules文件夹中查找，.....依次类推。</li></ul></li></ul><blockquote><p><strong>重要</strong>：代码文件夹不能有中文；代码文件夹不能和模块名同名。</p></blockquote><h3 id="_4-4-怎样使用第三方模块" tabindex="-1">4.4 怎样使用第三方模块 <a class="header-anchor" href="#_4-4-怎样使用第三方模块" aria-hidden="true">#</a></h3><ul><li>和使用内置模块一样，需要使用 <code>require</code> 加载模块</li><li>调用模块提供的方法完成工作</li><li>不用担心不会用，好的第三方模块都会用使用文档或者官方网站的。</li><li>有些模块没有官网，去 github 查找模块的使用文档，或者百度。</li></ul><h3 id="_4-5-演示-moment-模块-的使用" tabindex="-1">4.5 演示 moment 模块 的使用 <a class="header-anchor" href="#_4-5-演示-moment-模块-的使用" aria-hidden="true">#</a></h3><p><a href="http://momentjs.cn/" target="_blank" rel="noopener noreferrer">http://momentjs.cn/</a></p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// moment是一个专门处理时间日期的模块</span>

<span class="token comment">// 使用模块之前，必须加载</span>
<span class="token keyword">const</span> moment <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;moment&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置语言环境</span>
moment<span class="token punctuation">.</span><span class="token function">locale</span><span class="token punctuation">(</span><span class="token string">&#39;zh-cn&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// console.log(moment().format(&quot;YYYY-MM-DD HH:mm:ss&quot;))</span>
<span class="token comment">// console.log(moment().format(&quot;L&quot;))</span>

<span class="token comment">// console.log(moment([2021, 0, 22, 09, 30, 25]).fromNow())</span>
<span class="token comment">// console.log(moment(13432542333).fromNow())</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">moment</span><span class="token punctuation">(</span><span class="token string">&#39;2020-11-10T15:49:05.000Z&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fromNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_5-package-json文件" tabindex="-1">5.package.json文件 <a class="header-anchor" href="#_5-package-json文件" aria-hidden="true">#</a></h2><p>在初始化之后，会生成一个package.json文件</p><ul><li><p>创建 <code>package.json</code></p><div class="language-bash line-numbers-mode"><pre><code><span class="token function">npm</span> init 
<span class="token function">npm</span> init -y
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>main</p><p>main 字段指定了模块的入口文件。</p></li><li><p>dependencies 依赖(复数)</p><ul><li>dependencies指定了当前项目所依赖（需要）的包，<strong>可以使用 <code>npm install</code> 可以安装所有的依赖</strong></li><li>使用 <code>npm install 模块</code> 安装模块时，会将该模块记录到 dependencies 中，表示这是项目必须的模块，如 vue ,react 等</li><li>使用 <code>npm install 模块 -D</code> 安装模块时，会将该模块记录到 devDependencies 中，它表示项目不需要这个模块，但是开发阶段需要这个模块（进行测试、打包等等，例如 gulp ，babel，webpack 一般都是辅助工具）</li></ul></li><li><p>scripts</p><p><code>scripts</code>指定了运行脚本命令的 npm <strong>命令行</strong>缩写，比如start指定了运行<code>npm run start</code>时，所要执行的命令。</p><ul><li>下面的代码中，a 表示 git init 命令。执行命令时，使用 <code>npm run a</code> ，相当于执行了 git init</li><li>下面的代码中，start 表示 node app.js 命令，执行命令时，使用 <code>npm start</code> 即可，相当于执行了 node app.js</li></ul><div class="language-bash line-numbers-mode"><pre><code><span class="token string">&quot;scripts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;a&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;git init&quot;</span>,
    <span class="token string">&quot;start&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;node app.js&quot;</span>,
    <span class="token string">&quot;t&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;dir c:<span class="token entity" title="\\">\\</span>&quot;</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>运行 <code>scripts</code></p><div class="language-bash line-numbers-mode"><pre><code><span class="token function">npm</span> run t
<span class="token function">npm</span> run start
<span class="token comment"># 只有 start 可以简化调用</span>
<span class="token function">npm</span> start

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><h2 id="_6-require的加载机制" tabindex="-1">6.require的加载机制 <a class="header-anchor" href="#_6-require的加载机制" aria-hidden="true">#</a></h2><ol><li><p>判断缓存中有没有，如果有，使用缓存中的内容</p></li><li><p>缓存中没有，那么表示第一次加载，加载完会缓存</p></li><li><p>判断模块名有没有带路径（./）</p></li><li><p>模块名中<strong>有路径</strong>，加载<strong>自定义模块</strong>（自己写的文件）<code>const xx = require(&#39;./xx&#39;)</code></p><ol><li>优先加载同名文件，加载一个叫做 xx 的文件</li><li>再次加载js文件，加载 xx.js 文件</li><li>再次加载json文件，加载 xx.json 文件</li><li>最后加载node文件，加载 xx.node文件</li><li>如果上述文件都没有，则报错 “Cannot find module &#39;./xx&#39;”</li></ol></li><li><p>模块名<strong>没有路径</strong>，<strong>优先加载核心模块</strong>，<strong>如果没有核心模块，则加载第三方模块</strong></p></li><li><p>加载第三方模块的查找方式</p><ol><li>优先在当前文件夹的node_modules里面查找第三方模块</li><li>在当前文件夹的上级目录的node_modules里面查找第三方模块</li><li>继续向上层文件夹查找第三方模块</li><li>.........</li></ol></li></ol><h2 id="_7-开发属于自己的包" tabindex="-1">7.开发属于自己的包 <a class="header-anchor" href="#_7-开发属于自己的包" aria-hidden="true">#</a></h2><h3 id="_7-1-规范的包结构" tabindex="-1">7.1 规范的包结构 <a class="header-anchor" href="#_7-1-规范的包结构" aria-hidden="true">#</a></h3><p>在清楚了包的概念、以及如何下载和使用包之后，接下来，我们深入了解一下包的内部结构。</p><div class="language-"><pre><code>📂 - sy123
		📃 - package.json  （package.json包的配置文件）
		📃 - index.js      （入口文件）
		📃 - README.md     （说明文档）
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>一个规范的包结构，需要符合以下 3 点要求:</p><ol><li>包必须以单独的目录而存在</li><li>包的顶级目录下要必须包含 package.json 这个包管理配置文件</li><li>package.json 中必须包含 name，version，main 这三个属性，分别代表包的名字、版本号、包的入口。 <ul><li>name 包的名字，我们使用 require()加载模块的时候，使用的就是这个名字</li><li>version 版本，1.2.18</li><li>main 入口文件。默认是index.js 。如果不是，需要使用main指定</li></ul></li></ol><p>注意:以上 3 点要求是一个规范的包结构必须遵守的格式</p><h3 id="_7-2-开发属于自己的包" tabindex="-1">7. 2 开发属于自己的包 <a class="header-anchor" href="#_7-2-开发属于自己的包" aria-hidden="true">#</a></h3><ul><li><p>初始化 package.json</p><p><strong>注意，JSON文件不能有注释，下面加注释，是为了理解</strong>。</p><div class="language-json line-numbers-mode"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sy123&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 包（模块）的名字，和文件夹同名。别人加载我们的包，找的就是这个文件夹</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;This is a package by Laotang&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 别人加载我们的模块用，require加载的就是这里指定的文件</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 在npm网站中，通过关键字可以搜索到我们的模块，按情况设置</span>
    <span class="token string">&quot;laotang&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;itcast&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;test&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Laotang&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 作者</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span> <span class="token comment">// 开源协议</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><p>关于更多 license 许可协议相关的内容，可参考 <a href="https://www.jianshu.com/p/23e61804d81e" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/23e61804d81e</a></p></blockquote></li><li><p>index.js 中定义功能方法</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 别人加载的就是我的 index.js </span>
<span class="token comment">// 所以，必须在 index.js 中导出内容</span>

<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;aaa&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;bbb&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b <span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li><li><p>编写包的说明文档</p><p>包根目录中的 <a href="http://README.md" target="_blank" rel="noopener noreferrer">README.md</a> 文件，是包的使用说明文档。通过它，我们可以事先把包的使用说明，以 markdown 的 格式写出来，方便用户参考。</p><p>README 文件中具体写什么内容，没有强制性的要求;只要能够清晰地把包的作用、用法、注意事项等描述清楚即可。</p></li></ul><h3 id="_7-3-注册npm账号" tabindex="-1">7.3 注册npm账号 <a class="header-anchor" href="#_7-3-注册npm账号" aria-hidden="true">#</a></h3><ul><li>访问 <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/</a> 网站</li><li>点击 sign up 按钮，进入注册用户界面</li><li>填写账号相关的信息</li><li>点击 Create an Account 按钮，注册账号</li><li>注册完账号，需要到邮箱中认证一下</li></ul><h3 id="_7-4-发布包" tabindex="-1">7.4 发布包 <a class="header-anchor" href="#_7-4-发布包" aria-hidden="true">#</a></h3><ul><li><p><code>终端中</code>，切换镜像源为npm（不能发布到淘宝，所以必须切换镜像源为npm主站）</p></li><li><p>nrm use npm：</p><ul><li>nrm 是npm的镜像源管理工具，使用这个就可以快速地在 npm 源间切换</li><li>nrm安装：npm i nrm -g</li></ul></li><li><p><code>终端中</code>，登录 npm 账号</p><ul><li>执行 <code>npm login</code> 命令</li><li>输入账号</li><li>输入密码（<strong>输入的密码是看不见的，正常</strong>）</li><li>输入邮箱</li></ul><p><img src="/node/assets/image-20200406182039217.4ef69a7a.png" alt="image-202000618039217"></p></li><li><p>发布</p><ul><li>注意，<strong>执行命令的文件夹，必须是包的根目录</strong>。</li><li>运行 <code>npm publish</code> 命令，即可将包发布到 npm 上</li></ul></li><li><p>常见错误</p><ul><li><p>自己的模块名不能和已存在的模块名同名。（可以先去npm网站搜索是否同名）</p></li><li><p>24小时内不能重复发布</p></li><li><p>新注册的账号，必须先邮箱（邮件可能是垃圾邮件）验证，然后才能发布</p></li></ul></li><li><p>删除已发布的包</p><ul><li>运行 npm unpublish 包名 --force 命令，即可从 npm 删除已发布的包。</li></ul></li><li><p>其他注意事项:</p><ul><li>npm unpublish 命令只能删除 72 小时以内发布的包</li><li>npm unpublish 删除的包，在 24 小时内不允许重复发布</li><li>发布包的时候要慎重，尽量不要往 npm 上发布没有意义的包!</li></ul></li></ul><blockquote><p>更多关于npm的命令：<a href="https://www.npmjs.cn/" target="_blank" rel="noopener noreferrer">https://www.npmjs.cn/</a></p></blockquote><h2 id="_8-全局模块" tabindex="-1">8.全局模块 <a class="header-anchor" href="#_8-全局模块" aria-hidden="true">#</a></h2><h3 id="_8-1-和本地模块的差异" tabindex="-1">8.1 和本地模块的差异 <a class="header-anchor" href="#_8-1-和本地模块的差异" aria-hidden="true">#</a></h3><ul><li>全局安装的模块，不能通过 <code>require()</code> 加载使用。</li><li>全局安装的模块，一般都是命令或者工具。</li></ul><h3 id="_8-2-安装卸载命令" tabindex="-1">8.2 安装卸载命令 <a class="header-anchor" href="#_8-2-安装卸载命令" aria-hidden="true">#</a></h3><ul><li><p>安装命令（多一个 <code>-g</code>）</p><div class="language-bash line-numbers-mode"><pre><code><span class="token function">npm</span> i 模块名 -g
<span class="token comment"># 或</span>
<span class="token function">npm</span> i -g 模块名

<span class="token comment">### mac 系统如果安装不上，使用下面的命令提高权限</span>
<span class="token function">sudo</span> <span class="token function">npm</span> i -g 模块名
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p>卸载命令（也是多一个 <code>-g</code>）</p><div class="language-bash line-numbers-mode"><pre><code><span class="token function">npm</span> un 模块名 -g
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li><li><p>全局安装的模块，在系统盘（C盘）</p><ul><li>通过命令 <code>npm root -g</code> 可以查看全局安装路径</li></ul></li></ul><h3 id="_8-3-全局安装nrm" tabindex="-1">8.3 全局安装nrm <a class="header-anchor" href="#_8-3-全局安装nrm" aria-hidden="true">#</a></h3><p>nrm 是作用是切换镜像源（模块下载地址；模块下载的网站）。</p><p><img src="/node/assets/image-20210122120308133.271d224f.png" alt="image-20210122120308133"></p><p>全局安装</p><div class="language-"><pre><code>npm i -g nrm   （mac系统前面加 sudo）

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用nrm</p><div class="language-"><pre><code>nrm ls    --- 查看全部可用的镜像源
nrm use taobao  ---- 切换到淘宝镜像
nrm use npm  ---- 切换到npm主站

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_8-4-第一次运行报错及解决" tabindex="-1">8.4 第一次运行报错及解决 <a class="header-anchor" href="#_8-4-第一次运行报错及解决" aria-hidden="true">#</a></h3><ul><li><p>运行 <code>nrm ls</code> 或者 <code>nrm use taobao</code> 等命令，如果报错如下：</p><p>“无法加载文件 C:......................，<strong>因为在此系统上禁止运行脚本</strong>。................”</p></li><li><p>解决办法是：</p><ul><li><code>管理员</code>方式，打开命令行（powershell）窗口</li><li>执行 <code>set-ExecutionPolicy RemoteSigned;</code></li><li>在出现的选项中，输入 <code>A</code>，回车。即可。</li></ul></li><li><p>如果报错如下</p><p>“无法将 nrm 识别为 cmdlet、函数、脚本文件或可运行程序的名称。xxxxxxxxxxx”</p></li><li><p>解决办法，重启vscode，win7可能要重启电脑。</p></li></ul><h2 id="_9-全局模块和本地模块的对比" tabindex="-1">9.全局模块和本地模块的对比 <a class="header-anchor" href="#_9-全局模块和本地模块的对比" aria-hidden="true">#</a></h2><blockquote><p>本地模块，在安装之前，必须先初始化；全局安装的模块不需要初始化。</p></blockquote><p><img src="/node/assets/image-20210122120839735.c155acf3.png" alt="image-20210122120839735"></p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><p class="last-updated" data-v-fb8d84c6 data-v-5797b537><span class="prefix" data-v-5797b537>上次更新:</span><span class="datetime" data-v-5797b537></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/node/node/mds/1.start" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>1.起步</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/node/node/mds/3.other" data-v-38ede35f><span class="text" data-v-38ede35f>3.其他</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"b00a1b9e\",\"node_mds_1.start.md\":\"cf982389\",\"node_mds_2.npm.md\":\"46ac5290\",\"node_mds_3.other.md\":\"95574b24\",\"node_mds_4.mysql.md\":\"29948b0d\",\"node_mds_5.interface.md\":\"764ddf40\",\"node_mds_6.webpack.md\":\"f1972ab4\"}")</script>
    <script type="module" async src="/node/assets/app.ead5fea0.js"></script>
    
  </body>
</html>